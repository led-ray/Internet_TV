# インターネットTVのデータベース作成
本リポジトリでは、インターネット上の番組配信サイトを想定して、データベースの作成例を示します。
大まかな仕様は次の通りです。


>ドラマ1、ドラマ2、アニメ1、アニメ2、スポーツ、ペットなど、複数のチャンネルがある
>
>各チャンネルの下では時間帯ごとに番組枠が1つ設定されており、番組が放映される
>
>番組はシリーズになっているものと単発ものがある。シリーズになっているものはシーズンが1つのものと、
>シーズン1、シーズン2のように複数シーズンのものがある。
>
>    各シーズンの下では各エピソードが設定されている。
>
>再放送もあるため、ある番組が複数チャンネルの異なる番組枠で放映されることはある
>
>番組の情報として、タイトル、番組詳細、ジャンルが画面上に表示される
>
>各エピソードの情報として、シーズン数、エピソード数、タイトル、エピソード詳細、動画時間、公開日、視聴数が
>画面上に表示される。
>
>    単発のエピソードの場合はシーズン数、エピソード数は表示されない
>
>ジャンルとしてアニメ、映画、ドラマ、ニュースなどがある。各番組は1つ以上のジャンルに属するKPIとして、
>チャンネルの番組枠のエピソードごとに視聴数を記録する。
>
>   なお、一つのエピソードは複数の異なるチャンネル及び番組枠で放送されることがあるので、属するチャンネルの番組枠ごとに視聴数がどうだったかも追えるようにする


# テーブル設計
テーブル設計は以下のリンクに整理しています。

[テーブル設計](https://github.com/led-ray/Internet_TV/blob/main/Tables.md)

# データベースの作成
まずはデータベースを作成します。

今回はMySQLの使用を想定しています。Docker等でMySQL環境を構築したら、下記を入力してユーザーを選択します。

`mysql -u root -p;`

次にデータベースを作成します。

`CREATE DATABASE InternetTV;`

問題なくデータベースが作成されているか、下記を入力して確認してみてください。

`SHOW DATABASES;`

最後に、使用するデータベースを選択します。

`USE InternetTV;`


# テーブルの構築
「テーブル設計」の内容をもとに、実際にテーブルを構築します。

下記リンクに、テーブルを構築するクエリ一式を記載しています。

まとめて実行すればすべてのテーブルが構築されます。もし1つずつ実行する場合は、外部キー制約を踏まえて順番に実行してください。上から順に実行すれば問題ありません。

[テーブル構築クエリ](https://github.com/led-ray/Internet_TV/blob/main/Create_Table.sql)

# サンプルデータの格納
次に、構築したテーブルにサンプルのデータを格納します。

下記リンクに、サンプルデータを格納するクエリ一式を記載しています。

なお上記テーブルの構築と同様、外部キー制約があるため1つずつ実行する場合は順番に気を付けてください。

[サンプルデータ格納クエリ](https://github.com/led-ray/Internet_TV/blob/main/Make_Sampledata.sql)

# クエリのテスト
サンプルデータの格納が出来たら、クエリを使ってデータ抽出のテストをしてみてください。

下記リンクにサンプルのクエリを記載しています。

[データ抽出クエリサンプル](https://github.com/led-ray/Internet_TV/blob/main/Extract_Data.sql)
